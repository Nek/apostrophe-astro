---
import { templates } from 'virtual:apostrophe-doctypes';

const { aposData } = Astro.props;

if (aposData.template === '@apostrophecms/page:notFound') {
  // TODO does not appear to work as documented
  Astro.response.status = 404;
}

const Template = templates[aposData.template]
  || templates[aposData.template.replace(':page', '')]
  || templates[aposData.module]
  || templates['apos-no-template'];

---
{ Template && <Template {aposData} /> }
