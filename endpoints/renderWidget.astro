--- 
import AposWidget from "../components/AposWidget.astro";
import aposRequest from "../lib/aposRequest.js";
import aposResponse from "../lib/aposResponse.js";

const request = aposRequest(Astro.request);
const response = await aposResponse(request);
const responseBody = await response.json();
const { widget, ...props } = responseBody;
if (!widget) {
  throw new Error('There was an issue while rendering the widget in the renderWidget endpoint.');
}
---
<AposWidget {widget} {...props} />